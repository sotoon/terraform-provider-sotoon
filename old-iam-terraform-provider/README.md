# Terraform Provider Sotoon


## Build provider

Run the following command to build the provider

```shell
$ go build -o terraform-provider-sotoon
```

## Test sample configuration

First, build and install the provider.

```shell
$ make install
```

Afterthat, change the `~/.terraformrc` file to following content.

```shell
provider_installation {
  dev_overrides {
      "hashicorp.com/edu/sotoon" = "/Users/abolfazlsoltani/go/bin"
  }
}
```

Then, navigate to the `examples/real-usage` directory. 

```shell
$ cd examples/real-usage
```

Run the following command to initialize the workspace and apply the sample configuration.

```shell
$ terraform init && terraform apply
```

## Generating Docs
First `mkdocs` must be installed.
```
pip install mkdocs
pip install pymdown-extensions --force
```
Then docs could be generated by the following command:
```
make docs
```

## Renewing the mocks
```
go install github.com/golang/mock/mockgen@v1.6.0
mockgen -destination=mocks/iam/client.go -package=iam -source=vendor/git.cafebazaar.ir/infrastructure/bepa-client/pkg/client/interface.go IAMClient --build_flags=--mod=mod
```
