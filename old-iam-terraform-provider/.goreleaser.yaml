before:
  hooks: []
builds:
  - env:
      # goreleaser does not work with CGO, it could also complicate
      # usage by users in CI/CD systems like Terraform Cloud where
      # they are unable to install libraries.
      - CGO_ENABLED=0
      - GOPRIVATE=git.cafebazaar.ir
      - GARBLE_PATH={{ .Env.GARBLE_PATH }}
      - RELEASE_VERSION={{.Version}}
      - RELEASE_COMMIT={{.Commit}}
      - RELEASE_OUTPUT={{ .ProjectName }}-sotoon_v{{ .Version }}
    mod_timestamp: "{{ .CommitTimestamp }}"
    goos:
      - freebsd
      - windows
      - linux
      - darwin
    goarch:
      - amd64
      - "386"
      - arm
      - arm64
    ignore:
      - goos: darwin
        goarch: "386"
    binary: "{{ .ProjectName }}-sotoon_v{{ .Version }}"
    gobinary: ./scripts/build.sh
archives:
  - format: zip
    name_template: "{{ .ProjectName }}-sotoon_{{ .Version }}_{{ .Os }}_{{ .Arch }}"
    files:
      - "VERSION"
checksum:
  name_template: "{{ .ProjectName }}-sotoon_{{ .Version }}_SHA256SUMS"
  algorithm: sha256
signs:
  - artifacts: checksum
    args:
      - "--batch"
      - "--local-user"
      - "{{ .Env.GPG_KEY_ID }}"
      - "--detach-sign"
      - "${artifact}"
release:
  disable: true
changelog:
  skip: true
